"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{88591:function(t,e,n){n.d(e,{Z:function(){return E}});var i,l,a,o,d=n(82729),r=n(35944),s=n(62443),c=n(18446),u=n.n(c),h=n(41664),v=n.n(h),m=n(67294),p=n(9473),f=n(84626);n(62822);var Z=n(34317),g=n(24519),N=n(90455),_=n(70351),A=n(33264),x=n(70917),w=n(63890),T={src:"/_next/static/media/docDefault.d021c6cb.jpg"},B=n(52284),b=n(59137),I=n(81591);function y(){let t=(0,d._)(["\n        .card-btn {\n          &:hover {\n            border-color: ",";\n            color: ",";\n            letter-spacing: 8px;\n            transition: all 0.5s ease;\n          }\n        }\n\n        .anticon-loading {\n          font-size: 18px;\n          color: ",";\n        }\n      "]);return y=function(){return t},t}function C(){let t=(0,d._)(["\n                max-width: 300px;\n                min-width: 200px;\n                .title {\n                  font-weight: 700;\n                  font-size: 15px;\n                }\n                .heart {\n                  font-size: 40px;\n                  margin-left: 10px;\n                  .anticon {\n                    color: ",";\n                  }\n                  .anticon:hover {\n                    color: red;\n                    cursor: pointer;\n                    transition: all 1s ease;\n                  }\n                }\n              "]);return C=function(){return t},t}(i=a||(a={})).AVAILABLE="TH\xcaM",i.IN_CART="XO\xc1",i.PENDING="ĐANG DUYỆT",i.BOUGHT="Đ\xc3 DUYỆT",(l=o||(o={})).AVAILABLE="#0dcaf0",l.IN_CART="#ed5e68",l.PENDING="#8c8c8c",l.BOUGHT="#23c501";let L=(0,m.memo)(t=>{var e,n;let{document:i,isMyLearn:l,className:d,isSearch:c}=t,[u,h]=(0,m.useState)(a.AVAILABLE),[L,E]=(0,m.useState)(!1),[S,O]=(0,m.useState)(i);(0,p.I0)(),(0,m.useEffect)(()=>{S.sale_status===g.NO.AVAILABLE?h(a.AVAILABLE):S.sale_status===g.NO.IN_CART?h(a.IN_CART):S.sale_status===g.NO.PENDING?h(a.PENDING):S.sale_status===g.NO.BOUGHT&&h(a.BOUGHT)},[S]);let D=async()=>{(0,A.$f)(),E(!0);try{if(S.sale_status===g.NO.AVAILABLE){let t=await f.Z.moveDoc(S.id,Z.vY.LIST,Z.vY.CART);setTimeout(()=>{O(t)},300)}else if(S.sale_status===g.NO.IN_CART){let t=await f.Z.moveDoc(S.id,Z.vY.CART,Z.vY.LIST);setTimeout(()=>{O(t)},300)}}catch(t){console.log("error update cart",t)}finally{setTimeout(()=>{E(!1)},300)}};return(0,m.useEffect)(()=>{O(i)},[i]),(0,r.BX)(I.NP,{css:(0,x.iv)(y(),u===a.AVAILABLE?o.AVAILABLE:o.IN_CART,u===a.AVAILABLE?o.AVAILABLE:o.IN_CART,u===a.AVAILABLE?o.AVAILABLE:o.IN_CART),className:d,children:[(0,r.tZ)("div",{className:"pop-up",children:(0,r.tZ)(s.default,{placement:"right",content:(0,r.BX)("div",{css:(0,x.iv)(C(),S.is_favorite?"red":""),children:[(0,r.tZ)("p",{className:"title",children:i.name}),(0,r.BX)("p",{children:["Cập nhật: ",(0,N.p6)(null==i?void 0:i.modified)]}),(0,r.BX)("p",{children:["Dung lượng: ",null==i?void 0:null===(e=i.file)||void 0===e?void 0:e.file_size," KB"]}),(0,r.tZ)("p",{children:i.description})]}),trigger:"hover",children:(0,r.BX)(v(),{href:"".concat(_.Z.DOCUMENT,"/").concat(i.id),className:"detail",children:[(0,r.tZ)("div",{className:"doc--image",children:(0,r.tZ)("img",{className:"doc-img",src:"".concat((null==i?void 0:null===(n=i.thumbnail)||void 0===n?void 0:n.image_path)||T.src),alt:"doc image."})}),(0,r.BX)("div",{className:"doc_info",children:[(0,r.tZ)("div",{className:"title",children:i.name}),c&&(0,r.BX)("p",{children:["Cập nhật: ",(0,N.p6)(null==i?void 0:i.modified)]}),(null==i?void 0:i.author)&&(0,r.BX)("div",{className:"author",children:["T\xe1c giả: ",null==i?void 0:i.author]}),c&&i.description]})]})})}),(0,r.BX)("div",{children:[(0,r.BX)("div",{className:"contact-us",children:[(0,r.tZ)(v(),{href:B.Z.GMAIL_URL,target:"_blank",children:"Li\xean hệ"}),i.sale_status===g.NO.BOUGHT&&(0,r.tZ)(w.Z,{})]}),!l&&!c&&(0,r.tZ)(b.Z,{className:"card-btn",btnTextColor:"black",btnStyle:"outline",btnSize:"small",btnWidth:"full-w",loading:L,disabled:S.sale_status===g.NO.PENDING||S.sale_status===g.NO.BOUGHT||L,onClick:t=>{t.stopPropagation(),D()},children:u})]})]})},u());var E=L},19841:function(t,e,n){n.d(e,{Z:function(){return f}});var i=n(82729),l=n(35944),a=n(70302),o=n(51024),d=n(86994),r=n(16829),s=n(46256),c=n(11163),u=n(9844),h=n(70351);function v(){let t=(0,i._)(["\n  .side-item {\n    margin-bottom: 10px;\n  }\n  a {\n    text-decoration: none;\n    font-weight: 600;\n  }\n  .fb-page {\n    .ant-card-body {\n      font-size: 20px;\n      a {\n        color: #0d8bf0 !important;\n      }\n    }\n  }\n  .topic {\n    .topic-item {\n      font-weight: 600;\n      cursor: pointer;\n      padding: 5px;\n    }\n  }\n"]);return v=function(){return t},t}let{Search:m}=o.default,p=r.Z.div(v());function f(t){var e,n;let i=(0,c.useRouter)(),{search:o}=i.query,{homeData:r}=(0,u.Z)(),v=t=>{let e="/search/".concat(t);i.push(e,void 0,{shallow:!0})};return(0,l.BX)(p,{children:[(0,l.tZ)("div",{className:"side-item search-bar",children:(0,l.tZ)(a.default,{title:"T\xecm kiếm",style:{width:300},children:(0,l.tZ)(m,{placeholder:"Nhập để t\xecm",onSearch:v,enterButton:!0,allowClear:!0,value:o})})}),(0,l.tZ)("div",{className:"side-item popular-content"}),(0,l.BX)("div",{className:"side-item topic",children:[(0,l.tZ)(a.default,{title:"Chuy\xean mục",style:{width:300},children:null==r?void 0:null===(e=r.category)||void 0===e?void 0:e.map(t=>(0,l.BX)("div",{className:"topic-item",onClick:()=>v(t),children:[(0,l.tZ)(d.default,{}),t.toLocaleUpperCase()]},t))}),(0,l.tZ)(a.default,{title:"B\xe0i viết mới",style:{width:300},children:null==r?void 0:null===(n=r.new_post)||void 0===n?void 0:n.map(t=>{var e;return(0,l.tZ)("div",{className:"topic-item",onClick:()=>{i.push("".concat(h.Z.POST,"/").concat(t.id))},children:(0,l.tZ)(a.default,{hoverable:!0,style:{width:"100%"},cover:(0,l.tZ)("img",{src:(null==t?void 0:null===(e=t.thumbnail)||void 0===e?void 0:e.image_path)||"",alt:"img",width:200,height:130}),children:(0,l.tZ)(s.Z,{title:null==t?void 0:t.name})})},t.id)})})]})]})}},17595:function(t,e,n){n.d(e,{Z:function(){return v}});var i=n(82729),l=n(35944),a=n(91633),o=n(16829),d=n(41664),r=n.n(d),s=n(70351),c=n(33264);function u(){let t=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-height: 100%;\n  max-width: ",";\n  min-width: 200px;\n  min-height: 300px;\n  p {\n    margin: 0;\n  }\n  .ant-image {\n    float: left;\n    margin-right: 15px;\n    margin-bottom: 5px;\n    min-height: 150px;\n  }\n  .post-name {\n    font-weight: 700;\n    min-height: ",";\n    word-break: break-all;\n  }\n  .post-sumary {\n    font-style: italic;\n    font-weight: 500;\n    min-height: 80px;\n    /* text-align: left;\n    display: -webkit-box;\n    -webkit-line-clamp: 6;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: gray;\n    white-space: normal; */\n  }\n  .author {\n    font-family: 'Montserrat';\n    text-align: left;\n    font-size: 14px;\n    font-weight: 500;\n    font-style: italic;\n  }\n  .post-create {\n    margin: 10px;\n    margin-bottom: 0;\n    text-align: right;\n  }\n  .postItem {\n    .post-detail {\n      display: ",";\n    }\n    width: 100%;\n    img {\n      width: 200px;\n      height: 130px;\n      aspect-ratio: auto 240/135;\n    }\n  }\n  .post-content {\n    width: ",";\n  }\n"]);return u=function(){return t},t}let h=o.Z.div(u(),t=>t.isSearch?"":"210px",t=>(t.isSearch,""),t=>t.isSearch?"flex":"grid",t=>t.isSearch?"100%":"");function v(t){var e,n;let{post:i,isSideBar:o,isSearch:d}=t;return(0,l.tZ)(h,{isSearch:!!d,children:(0,l.tZ)("div",{className:"postItem",children:(0,l.BX)(r(),{href:"".concat(s.Z.POST,"/").concat(i.id),className:"post-detail",children:[(0,l.tZ)(a.Z,{src:null==i?void 0:null===(e=i.thumbnail)||void 0===e?void 0:e.image_path,preview:!1}),(0,l.BX)("div",{className:"post-content",children:[(0,l.tZ)("p",{className:"post-name",children:null==i?void 0:i.name}),(null==i?void 0:i.author)&&(0,l.BX)("div",{className:"author",children:["T\xe1c giả: ",null==i?void 0:i.author]}),(0,l.tZ)("p",{className:"post-sumary",children:(null==i?void 0:i.content_summary.length)?"".concat((null==i?void 0:null===(n=i.content_summary)||void 0===n?void 0:n.slice(0,160))+"..."):""}),(0,l.tZ)("p",{className:"post-create",children:(0,c.q8)(null==i?void 0:i.created)})]})]})})})}},9844:function(t,e,n){var i=n(88767),l=n(84626),a=n(45354);e.Z=()=>{let{data:t,error:e}=(0,i.useQuery)("home",l.Z.getHome,{staleTime:a.ok,keepPreviousData:!0,cacheTime:a.bQ,refetchOnWindowFocus:!1}),{data:n,error:o,refetch:d,isLoading:r}=(0,i.useQuery)("chat-history",l.Z.getChatHistory,{staleTime:a.ok,keepPreviousData:!0,cacheTime:a.bQ,refetchOnWindowFocus:!1});return{homeData:t,homeError:e,chatHistory:n,chatHistoryError:o,refetchChatList:d,chatLoading:r}}},90637:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var i,l,a=n(35944),o=n(5789),d=n(55673),r=n(82729),s=n(70302),c=n(89552),u=n(67294),h=n(84626),v=n(24519),m=n(78595),p=n(15737),f=n(70917),Z=n(73541),g=n(88591),N=n(81591),_=n(17595),A=n(34155);function x(){let t=(0,r._)(["\n        margin-bottom: 10px;\n        .title {\n          font-size: 14px;\n          font-weight: 700;\n          text-decoration: underline;\n        }\n        .ant-card-head-title {\n          font-weight: 700;\n        }\n      "]);return x=function(){return t},t}let w=(0,a.tZ)(m.default,{style:{fontSize:40},spin:!0});function T(t){var e,n,i,l,d,r,m,T;let{homeData:B}=t,[b,I]=u.useState(!1),[y,C]=u.useState(),[L,E]=u.useState(),[S,O]=u.useState(),[D,k]=u.useState(),U=async(t,e)=>{let n=localStorage.getItem(v.BU.SESSION_KEY);try{switch(I(!0),e){case"doc":if(n){let e=await h.Z.getAllDocs({page:1,limit:100},"",t);C(e)}else{let e=await h.Z.getHomeDocs({page:1,limit:100},"",t);C(e)}break;case"course":if(n){let e=await h.Z.getAllCourses({page:1,limit:100},"",t);E(e)}else{let e=await h.Z.getHomeCourses({page:1,limit:100},"",t);E(e)}break;case"class":if(n){let e=await h.Z.listClasses(100,1,"",t);O(e)}else{let e=await h.Z.getHomeClasses(100,1,"",t);O(e)}break;case"post":let i=await h.Z.listPosts(100,1,"","",t);k(i);break;default:console.log("new type")}}catch(t){console.log("error",t)}finally{I(!1)}};return u.useEffect(()=>{var t,e,n,i,l,a,o,d;(null==B?void 0:null===(t=B.detail)||void 0===t?void 0:t.document_id)&&U(null==B?void 0:null===(e=B.detail)||void 0===e?void 0:e.document_id,"doc"),(null==B?void 0:null===(n=B.detail)||void 0===n?void 0:n.course_id)&&U(null==B?void 0:null===(i=B.detail)||void 0===i?void 0:i.course_id,"course"),(null==B?void 0:null===(l=B.detail)||void 0===l?void 0:l.class_id)&&U(null==B?void 0:null===(a=B.detail)||void 0===a?void 0:a.class_id,"class"),(null==B?void 0:null===(o=B.detail)||void 0===o?void 0:o.post_id)&&U(null==B?void 0:null===(d=B.detail)||void 0===d?void 0:d.post_id,"post")},[B]),(0,a.tZ)("div",{css:(0,f.iv)(x()),children:(0,a.tZ)(s.default,{title:B.topic,extra:(0,a.BX)("a",{href:"#",children:[(0,a.tZ)(p.default,{}),"Xem tất cả",A.env.ECOURSE_API_URL]}),children:b?(0,a.tZ)("div",{style:{height:"72px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.tZ)(c.default,{indicator:w})}):(0,a.tZ)(a.HY,{children:(0,a.BX)(N.go,{children:[(null==y?void 0:null===(e=y.results)||void 0===e?void 0:e.length)?null==y?void 0:null===(n=y.results)||void 0===n?void 0:n.map((t,e)=>(0,a.tZ)(o.Z,{children:(0,a.tZ)(g.Z,{document:t})},e)):(0,a.tZ)(a.HY,{}),(null==L?void 0:null===(i=L.results)||void 0===i?void 0:i.length)?null==L?void 0:null===(l=L.results)||void 0===l?void 0:l.map((t,e)=>(0,a.tZ)(o.Z,{children:(0,a.tZ)(Z.Z,{course:t})},e)):(0,a.tZ)(a.HY,{}),(null==S?void 0:null===(d=S.results)||void 0===d?void 0:d.length)?null==S?void 0:null===(r=S.results)||void 0===r?void 0:r.map((t,e)=>(0,a.tZ)(o.Z,{children:(0,a.tZ)(Z.Z,{course:t})},e)):(0,a.tZ)(a.HY,{}),(null==D?void 0:null===(m=D.results)||void 0===m?void 0:m.length)?null==D?void 0:null===(T=D.results)||void 0===T?void 0:T.map((t,e)=>(0,a.tZ)(o.Z,{children:(0,a.tZ)(_.Z,{post:t})},e)):(0,a.tZ)(a.HY,{})]})})})})}var B=n(19841),b=n(9844);(i=l||(l={})).LIST_DOC="LIST_DOC",i.LIST_COURSE="LIST_COURSE",i.UPDATE_DOC="UPDATE_DOC",i.UPDATE_COURSE="UPDATE_COURSE";let I=()=>{var t;let{homeData:e}=(0,b.Z)();return(0,a.tZ)("div",{className:"page-container",children:(0,a.BX)(d.Z,{gutter:16,style:{maxWidth:"100%"},children:[(0,a.tZ)(o.Z,{span:18,children:null==e?void 0:null===(t=e.homepage)||void 0===t?void 0:t.map((t,e)=>(0,a.tZ)(T,{homeData:t},e))}),(0,a.tZ)(o.Z,{span:6,children:(0,a.tZ)(B.Z,{})})]})})};var y=()=>(0,a.tZ)(I,{})}}]);